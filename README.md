Bugs fixed, warnning cleaned.
Code updated for Qt5.8.0.

